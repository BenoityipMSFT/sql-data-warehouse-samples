{
    "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        // "serverName": {
        //     "type": "string",
        //     "metadata": {
        //         "description": "The server name of your pre-existing SQL Data Warehouse."
        //     }
        // },
        // "sqlDwDatabaseName": {
        //     "type": "string",
        //     "metadata": {
        //         "description": "The database name of your pre-existing SQL Data Warehouse."
        //     }
        // },
        // "numSpokeDb": {
        //     "type": "int",
        //     "metadata": {
        //         "description": "The number of databases to deploy based on a schema in the data warehouse instance. If you already have some number of spoke databases, ensure that you choose N + the existing number of databases."
        //     }
        // },
        // "spokeSchema" :{
        //     "type": "string",
        //     "defaultValue": "all",
        //     "metadata": {
        //         "description": "The schema for which definitions will be created in the cachedDbs. If no value is entered, all user schemas will be added as external table definitions in the cache database instances."
        //     }
        // },
        // "autoUserName": {
        //     "type": "string",
        //     "metadata": {
        //         "description": "The username for the Azure Automation credential."
        //     },
        //     "defaultValue": "autoUser"
        // },
        // "autoPassword": {
        //     "type": "securestring",
        //     "metadata": {
        //         "description": "The password for the Azure Automation credential."
        //     },
        //     "defaultValue": "autoP@ssword!"
        // }
    },
    "variables": {
        "spokeTemplateUri": "https://raw.githubusercontent.com/hirokib/sql-data-warehouse-samples/master/arm-templates/sqlDwSpokeDbTemplate/nested/spokeDb.json",
        "spokeDbPerformanceType": "PremiumRS",
        "spokeDbDTU": "250",
        "elasticPoolName": "[concat('Pool', uniquestring(resourceGroup().id))]"
    },
    "resources": [{
        "apiVersion": "2015-01-01",
        "name": "spokeDbDeployment",
        "type": "Microsoft.Resources/deployments",
        "properties": {
            "mode": "Incremental",
            "templateLink": {
                "uri": "[variables('spokeTemplateUri')]",
                "contentVersion": "1.0.0.0"
            },
            "parameters": {
                "databaseCount": {
                    "value": 2
                },
                "serverName": {
                    "value": "sampleeqsvr"
                },
                // "sqlDwDatabaseName": {
                //     "value": "sampleeqdw"
                // },
                "serverLocation": {
                    "value": "westus"
                },
                // "administratorLogin": {
                //     "value": "cloudSA"
                // },
                // "administratorLoginPassword": {
                //     "value": "dogmat1C"
                // },
                "poolEdition": {
                    "value": "PremiumRS"
                },
                "poolDtu": {
                    "value": 1000
                },
                "poolSize": {
                    "value": 256000
                },
                "databaseDtuMin": {
                    "value": 0
                },
                "databaseDtuMax": {
                    "value": 125
                },
                "elasticPoolName": {
                    "value": "[variables('elasticPoolName')]"
                }
            }

        }

    }],
    "outputs": {
        
    }
}